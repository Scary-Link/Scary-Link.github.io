<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CreepyLink Classic</title>
<style>
    body {
        margin: 0;
        font-family: monospace;
        background: black;
        color: lime;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        text-align: center;
    }

    .container {
        max-width: 650px;
        padding: 20px;
    }

    input, button {
        width: 100%;
        padding: 10px;
        margin-top: 10px;
        font-family: monospace;
        font-size: 16px;
    }

    button {
        cursor: pointer;
        background: lime;
        color: black;
        border: none;
        font-weight: bold;
    }

    .loading {
        font-size: 22px;
        animation: blink 1s infinite;
    }

    @keyframes blink {
        0%,50%,100% {opacity:1;}
        25%,75% {opacity:0;}
    }

    .output {
        margin-top: 15px;
        word-break: break-all;
    }
</style>
</head>
<body>
<div class="container" id="app"></div>

<script>
/* ---------------- Weighted Chaos Arrays ---------------- */

const mb = ['', '', '', 'phish_', 'account_', 'hidden_', 'install_', 'exploit_', 'root_', 'dox_', 'arpa_', 'logger_', 'impersonate_', 'lottery_', 'ad_', 'campaign_', 'flash_', 'urgent_', 'TODO_obfuscate_url_'];

const pb = ['ping_flood','redeem_gift','urgent_update','reset_password','claim_gift_card','hot_singles','backdoor_install','bank_xss','update_info','flash_games','ip_grab','login_page_2','video_player_update','document','authorize_access','digital_sign','login','celebrity_quiz','secure_login_page','invoice','download_now','click_me','account_verification','money_request','urgent_security_alert','not_virus','malware_obfuscated_release','system_optimizer','photo_viewer_update','crypto_wallet_update','salary_report','private_video','new_message_alert','free_vacation_offer','free_money','phishing_test'];

const gb = ['', '.exe','.msi','.js','.php','.dll','.bat','.scr','.lnk','.docm','.xlsm','.jar','.cmd','.vbs','.pdf','.mp4','.zip','.pl','.com'];

const yb = ['system32','Windows','Program_Files','temp','cache','download','update','install','hidden','secret','fbi','cia','nsa','irs','bank','paypal','bitcoin','free_robux','gift_card','lottery','winner','prize','virus','trojan','malware','ransomware','keylogger','surveillance','evidence','leaked','hacked','stolen'];

const kb = ['?tracking_id=666&camera_access=true','?vpn_bypass=true&ip_logged=true','?encrypt_files=all&ransom_amount=5BTC','?delete_system32=true&confirm=yes','?keylogger=active&send_logs=hourly'];

/* ---------------- Helpers ---------------- */

const r = arr => arr[Math.floor(Math.random() * arr.length)];

function generatePath() {
    const folderCount = Math.floor(Math.random() * 2);
    let folders = '';
    for (let i = 0; i < folderCount; i++) {
        folders += r(yb) + '/';
    }
    return folders + r(mb) + r(pb) + r(gb);
}

function generateQuery() {
    return Math.random() > 0.2 ? r(kb) : '';
}

/* ---------------- URL Normalization ---------------- */

function normalize(url) {
    url = url.trim();

    // Remove protocol
    url = url.replace(/^https?:\/\//, '');

    // Remove www
    url = url.replace(/^www\./, '');

    // YouTube watch â†’ youtu.be (preserve t and list)
    const ytMatch = url.match(/^youtube\.com\/watch\?(.+)/);

    if (ytMatch) {
        const params = new URLSearchParams(ytMatch[1]);
        const videoId = params.get('v');

        if (videoId) {
            let shortUrl = `youtu.be/${videoId}`;

            if (params.get('t')) {
                shortUrl += `?t=${params.get('t')}`;
            }

            if (params.get('list')) {
                const sep = shortUrl.includes('?') ? '&' : '?';
                shortUrl += `${sep}list=${params.get('list')}`;
            }

            return shortUrl;
        }
    }

    return url;
}

/* ---------------- Encoding ---------------- */

function encodeUrlSafe(str) {
    return btoa(str)
        .replace(/\+/g, '-')
        .replace(/\//g, '_')
        .replace(/=+$/, '');
}

function decodeUrlSafe(str) {
    str = str.replace(/-/g, '+').replace(/_/g, '/');
    while (str.length % 4) str += '=';
    return atob(str);
}

/* ---------------- App Logic ---------------- */

const app = document.getElementById("app");
const params = new URLSearchParams(window.location.search);
const accessKey = params.get("access_key");

/* ---------------- Redirect Mode ---------------- */

if (accessKey) {

    app.innerHTML = `
        <div class="loading">
            Decrypting system files...<br>
            Uploading data to remote server...
        </div>
    `;

    try {
        let decoded;

        // Try URL-safe first
        try {
            decoded = decodeUrlSafe(accessKey);
        } catch {
            // Fallback to legacy Base64
            decoded = atob(accessKey);
        }

        if (!decoded.startsWith("http")) {
            decoded = "https://" + decoded;
        }

        setTimeout(() => {
            window.location.href = decoded;
        }, 2000 + Math.random() * 1500);

    } catch {
        app.innerHTML = "<h2>Invalid access key.</h2>";
    }

}

/* ---------------- Generator Mode ---------------- */

else {

    app.innerHTML = `
        <h2>CreepyLink Classic (Optimized)</h2>
        <p>Make your URL look extremely suspicious.</p>
        <input id="urlInput" placeholder="Paste boring URL here..." />
        <button onclick="generateLink()">Generate Creepy Link</button>
        <div class="output" id="output"></div>
    `;

    window.generateLink = function() {
        const input = document.getElementById("urlInput").value.trim();
        if (!input) return;

        const normalized = normalize(input);
        const encoded = encodeUrlSafe(normalized);

        const path = generatePath();
        const query = generateQuery();

        const base = window.location.origin;
        const separator = query ? "&" : "?";

        const finalLink =
            `${base}/${path}${query}${separator}access_key=${encoded}`;

        document.getElementById("output").innerHTML = `
            <p><strong>Your Creepy Link:</strong></p>
            <p>${finalLink}</p>
        `;
    };
}
</script>
</body>
</html>
